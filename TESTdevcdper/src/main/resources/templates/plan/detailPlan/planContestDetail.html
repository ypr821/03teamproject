<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorator="layout/default">

<th:block layout:fragment="pageTitle">
	<title th:text="${title}">Insert title here</title>
	<div class="col-sm-6">
		<h1 class="m-0">공모전 상세 계획</h1>
	</div><!-- /.col -->
	<!--우측 상단 경로바  -->
	<th:block th:replace="/fragments/plan/planTopSelect :: planTopSelect"></th:block>
	<!-- /.col -->
</th:block>

<th:block layout:fragment="container" >
	<!--계획 공통검색 기능  -->
	<th:block th:replace="/fragments/plan/planDetailTitleSearch :: planDetailTitleSearch"></th:block>
	<th:block th:replace="//fragments/plan/planSearch :: planSearch"></th:block>
	<div class="col-12 col-sm-12">
		<div class="card" >
              <div class="card-header" style="min-width: max-content;">
                <div class="card-title">
					<h3>공모전 상세 계획 :&ensp;</h3>
					<h3 id="totalPlanSelected"></h3>
					&ensp;<h3>>&ensp;</h3>
					<h3 id="planSelected"></h3>	
				</div>
					
					<div class="card-tools">
					
						
						<a th:href="@{/addTotalPlan(planName='planContestDetail')}">
							<button type="button" class="btn btn-outline-primary">
								등록하기
							</button>
						</a> 	
						<button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
							<i class="fas fa-minus"></i>
						</button>

					</div>
                
                
              </div>
              <!-- /.card-header -->
              <div class="card-body  table-responsive p-0" style="overflow: scroll; white-space: nowrap;">
              	
                <table class="table table-striped text-nowrap">
                  <thead>
                    <tr>
                      <th>번호</th>
                      <th>공모전 상세 계획 제목</th>
                      <th>공모전 상세 계획 내용</th>
                      <th>상세 계획 시작일</th>
                      <th>상세 계획 종료일</th>
                      <th>진행율</th>
                      <th>상태</th>
                      <th>차수</th>
                      <th>차수 변경 사유</th>
                      <th style="text-align: center;">작성일자</th>
                      
                      <th> </th>
                    </tr>
                  </thead>
                  <tbody>
                    
                    
                    
                    <tr th:if="${#lists.size(detailContestPlanList) > 0}" th:each="l ,idx : ${detailContestPlanList}">
                      <td th:text="${idx.count}"></td>
					  <td th:text="${l.planDetailTitle}"></td>
                      <td>
                      	<!-- Button trigger modal -->
						<button type="button" class="btn btn-default btn-sm planContents">
						  공모전 상세 계획 내용보기
						</button>
                      </td>
                      
                      <td th:text="${l.planDetailStartDate}"></td>
                      <!-- <td>2021월 5월 5일</td> -->
                      <td th:text="${l.planDetailEndDate}"></td>
                      <!-- <td>2021월 5월 30일</td> -->
                      <td>
                        <div class="progress progress-sm progress-striped active">
                          <div class="progress-bar bg-primary" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width: 50%"></div>
                        </div>
                        <small>
							50% Complete
						</small>
                      </td>
                      <td th:text="${l.planDetailStatus}"><span class="badge bg-primary">진행중</span></td>
                      <td th:text="${l.planDetailDegree} + '차'"></td>
                      <!-- <td>1차</td> -->
                      <td>
						<!-- 차수변경사유 모달   --> 
						<button type="button" class="btn btn-default btn-sm planDegree">
							<i class="far fa-comment-alt"> 자세히 보기</i>
						</button>
					  </td>
                      <!-- <td>모달</td> -->
                      <td th:text="${l.planDetailCreatedDate}"></td>
                      <!-- <td>2021년 4월 23일</td> -->
                      <td class="project-actions text-center">
                      <a th:href="@{/mainCoaching}">
										<button type="button" class="btn btn-default btn-xs"
											id="callHelp">
											<i class="fas fa-pencil-alt"> </i> 도움받기
										</button>
						</a>
						<a th:href="@{#}">
							<button type="button" class="btn btn-default btn-xs" id="progressingModifyPlanContestDetail" >
								<i class="fas fa-pencil-alt">
								</i>
								수정
							</button>
						</a>
						<a  th:href="@{#}">
							<button type="button" class="btn btn-default btn-xs" >
								<i class="fas fa-trash">
								</i>
								삭제
							</button>	
						</a>
					</td>
                    </tr>
                    
                    
 
				   

             </tbody>
           </table>
         </div>
         <!-- /.card-body -->
       </div>
	
	</div>
	
	
	<!--Modal  -->
	<!-- <th:block th:replace="/fragments/detailPlanModal/modal-planContestDetail :: modal-planContestDetail"> </th:block> -->
	<th:block
		th:replace="/fragments/planModal/planModalContents :: planModalContents"></th:block>
	<!-- planModalDegree -->
	<th:block
		th:replace="/fragments/planModal/planModalDegree :: planModalDegree"></th:block>
	<!-- Modal 영역 끝 -->
	
	
	
	
	
</th:block>

<th:bolck layout:fragment="pageJavascript">
	<script type="text/javascript">
	

			/* Modal 영역 */
			$(document).on('click',".planContents",function(){
				$("#myModal").modal();
				$(".modal-text").text($(this).val());
			});
			$(document).on('click',".planDegree",function(){
				$("#myModal2").modal();
				if($(this).val() == 'null'){
					$(this).val()='';
					$(".modal-text2").text($(this).val());			
				}else{
					$(".modal-text2").text($(this).val());	
				}
			});
			
			
			/*card-title css영역*/
			$("h3").css({
				 'display': 'inline-block'
			});
			/*table css영역*/
			$("table").find("td").css({
			'vertical-align' : 'middle'
			,'text-align' : 'center'
			});
			$("table").find("th").css({
				'text-align' : 'center'
				
			});
			$("table").find("small").css({
				'color' : '#969696'
			});
		
	</script>
	
</th:bolck>

</html>